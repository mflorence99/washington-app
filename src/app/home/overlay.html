<section>
  <form
    [formGroup]="overlayForm"
    class="overlay-form"
    novalidate
    spellcheck="false"
  >
    <ng-container
      *ngFor="let group of overlayForm.controls.properties['controls']; let ix = index"
    >
      <div [formGroup]="group" style="display: flex">
        <ion-label>{{ caption(ix) }}</ion-label>
        <input type="hidden" formControlName="attribute" />
        <ion-checkbox
          class="checkbox"
          formControlName="enabled"
          mode="ios"
        ></ion-checkbox>
        <div
          (tap)="selectedPicker = group.get('fill')"
          [style.background]="group.get('fill').value"
          class="picker"
        ></div>
        <div
          (tap)="selectedPicker = group.get('stroke')"
          [style.background]="group.get('stroke').value"
          class="picker"
        ></div>
        <input type="hidden" formControlName="value" />
      </div>
    </ng-container>
  </form>

  <div
    (colorPickerCancel)="selectedPicker?.setValue('')"
    (colorPickerChange)="selectedPicker?.setValue($event)"
    [colorPicker]="selectedPicker?.value"
    [cpCancelButton]="true"
    [cpCancelButtonText]="'None'"
    [cpDialogDisplay]="'inline'"
    [cpDisableInput]="true"
    [cpFallbackColor]="''"
    [cpToggle]="true"
  ></div>

  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button (tap)="dismiss()" size="small">
      <ion-icon src="svg/close.svg"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</section>
